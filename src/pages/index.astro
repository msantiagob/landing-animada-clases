---
import Layout from "../layouts/Layout.astro";
import HeroHome from "../components/HeroHome.astro";
import TextMarquee from "../components/TextMarquee.astro";
import Faqs from "../components/Faqs.astro";
import StepsTimeline from "../components/StepsTimeline.astro";
import Plans from "../components/Plans.astro";
import Statements from "../components/Statements.astro";
import Introducing from "../components/Introducing.astro";
import GL from "../components/GL.astro";
import GLPlaces from "../components/GlPlaces.astro";
import ContactModal from "../components/ContactModal.astro";

import fotoMiguel from "../assets/img/foto_miguel.png";
---

<Layout title="sonmyd | Clases de IA Personalizadas — Miguel Zuluaga">
  <div id="inicio">
    <HeroHome
      title="Domina la IA con mentoría experta."
      subtitle="Clases 1 a 1 de Inteligencia Artificial diseñadas para ti, desde fundamentos hasta nivel avanzado. Aprende con quien vive y respira IA."
      cta={{
        title: "Reserva tu primera sesión",
        url: "#precios",
      }}
    
    />
    <div class="photo-inner">
      <img src={fotoMiguel.src} alt="Miguel Zuluaga — sonmyd" />
    </div>
  </div>

  <div id="clases">
    <Introducing
      title="Soy Miguel Zuluaga, experto en Inteligencia Artificial"
      text="Llevo años trabajando con IA aplicada: modelos de lenguaje, visión computacional, automatización y más. Mi misión es que tú también puedas dominar estas herramientas con un aprendizaje claro, práctico y a tu ritmo."
      cta={{
        title: "Conoce mi metodología",
        url: "#metodologia",
      }}
    />
  </div>

  <TextMarquee
    class="marquee"
    texts={[
      "Inteligencia Artificial",
      "Machine Learning",
      "IA Generativa",
      "Prompt Engineering",
      "Automatización con IA",
      "Computer Vision",
    ]}
  />

  <div id="metodologia">
    <StepsTimeline
      title="Cómo funciona"
      items={[
        {
          title: "Diagnóstico personalizado",
          text: "Comenzamos con una sesión gratuita para conocer tu nivel actual, tus objetivos y definir el camino de aprendizaje perfecto para ti.",
        },
        {
          title: "Clases a tu medida",
          text: "Sesiones 1 a 1 adaptadas a tu ritmo, tu horario y tu estilo de aprendizaje. Teoría y práctica en equilibrio perfecto.",
        },
        {
          title: "Proyectos reales",
          text: "Aplicamos cada concepto a casos de uso concretos y proyectos reales. Construyes portafolio mientras aprendes.",
        },
        {
          title: "Seguimiento continuo",
          text: "Monitoreo constante de tu progreso, ajuste del plan y soporte entre sesiones para que nunca te quedes atascado.",
        },
      ]}
    />
  </div>

  <Statements
    items={[
      {
        title: "Desde cero hasta IA avanzada",
        text: "No importa tu punto de partida. Tengo rutas de aprendizaje para principiantes absolutos y para quienes ya tienen bases técnicas.",
      },
      {
        title: "Práctica real desde el primer día",
        text: "Nada de teoría sin aplicación. Desde la primera clase trabajamos con herramientas y casos de uso del mundo real.",
      },
      {
        title: "Tu ritmo, tu agenda",
        text: "Las clases se adaptan a tu disponibilidad. Tú eliges cuándo y con qué frecuencia aprender.",
      },
    ]}
  />

  <TextMarquee
    class="marquee"
    texts={[
      "ChatGPT & LLMs",
      "Python para IA",
      "Automatización",
      "APIs de IA",
      "Fine-tuning",
      "RAG & Embeddings",
    ]}
  />

  <div id="precios">
    <Plans
      title="Planes & Precios"
      subtitle="Elige el plan que mejor se adapte a tus metas. Sin compromisos a largo plazo."
      items={[
        {
          title: "Clase Individual",
          price: {
            amount: "$25",
            duration: "session",
          },
          link: {
            title: "Empezar ahora",
            url: "#contacto",
          },
          features: [
            { title: "Sesión de 60 minutos" },
            { title: "Material de apoyo incluido" },
            { title: "Grabación de la clase" },
            { title: "Sesiones de seguimiento", disabled: true },
            { title: "Proyecto personalizado", disabled: true },
          ],
        },
        {
          title: "Paquete Intensivo",
          price: {
            amount: "$220",
            duration: "10 hrs",
          },
          link: {
            title: "Reservar mi lugar",
            url: "#contacto",
          },
          features: [
            { title: "10 horas de clase" },
            { title: "Material y recursos curados" },
            { title: "Grabación de todas las clases" },
            { title: "Seguimiento y soporte continuo" },
            { title: "Proyecto real de portafolio" },
          ],
        },
      ]}
    />
  </div>

  <div id="contacto">
    <Faqs
      title="Preguntas Frecuentes"
      mobileTitle="FAQs"
      subtitle="Todo lo que necesitas saber antes de empezar."
      items={[
        {
          question: "¿Necesito conocimientos previos de programación?",
          answer:
            "No es obligatorio. Tengo rutas de aprendizaje para todos los niveles: desde quienes nunca han programado hasta desarrolladores que quieren especializarse en IA. En la sesión de diagnóstico definimos el camino ideal para ti.",
        },
        {
          question: "¿Cómo se realizan las clases?",
          answer:
            "Las clases son 100% online vía videollamada (Google Meet o Zoom). Trabajamos con pantalla compartida, ejercicios en vivo y herramientas reales de IA durante cada sesión.",
        },
        {
          question: "¿Puedo cambiar mi plan después de comenzar?",
          answer:
            "Sí. Puedes cambiar de plan en cualquier momento según tu disponibilidad y presupuesto. La flexibilidad es parte del servicio.",
        },
        {
          question: "¿Qué temas cubre el programa?",
          answer:
            "Fundamentos de IA y Machine Learning, Python para IA, Modelos de Lenguaje (LLMs), IA Generativa, Prompt Engineering, APIs de IA, automatización con agentes, Computer Vision y más. El plan se personaliza según tus objetivos.",
        },
        {
          question: "¿Cuánto tiempo necesito dedicar entre sesiones?",
          answer:
            "Lo que tú puedas. Diseño el plan con ejercicios que se ajustan a tu disponibilidad real, desde 30 minutos diarios hasta sesiones más intensivas si prefieres avanzar más rápido.",
        },
        {
          question: "¿Hay una sesión de prueba gratuita?",
          answer:
            "Sí. La primera sesión de diagnóstico de 30 minutos es completamente gratuita. Nos conocemos, evaluamos tu nivel y definimos si hay fit antes de cualquier compromiso.",
        },
      ]}
    />
  </div>

  <GL />
  <GLPlaces />
  <ContactModal />
</Layout>

<script>
  const EU = new Set([
    "ES","FR","DE","IT","PT","NL","BE","AT","CH","SE","NO","DK","FI",
    "IE","GR","PL","CZ","HU","RO","BG","HR","SK","SI","EE","LV","LT",
    "LU","MT","CY","IS","LI","AL","RS","BA","ME","MK","MD",
  ]);

  type PriceEntry = {
    amount: string;
    duration: string;
    savings?: string;
  };
  type CountryPricing = {
    individual: PriceEntry;
    paquete: PriceEntry;
  };

  const PRICING: Record<string, CountryPricing> = {
    DEFAULT: {
      individual: { amount: "$25",      duration: "session" },
      paquete:    { amount: "$220",     duration: "10 hrs",   savings: "Te ahorras $30" },
    },
    CO: {
      individual: { amount: "$80.000",  duration: "sesión" },
      paquete:    { amount: "$750.000", duration: "10 horas" },
    },
    EU: {
      individual: { amount: "€25",      duration: "sesión" },
      paquete:    { amount: "€220",     duration: "10 horas", savings: "Te ahorras €30" },
    },
    MX: {
      individual: { amount: "$450",     duration: "sesión" },
      paquete:    { amount: "$4.000",   duration: "10 horas", savings: "Te ahorras $500" },
    },
    CL: {
      individual: { amount: "$20.000",  duration: "sesión" },
      paquete:    { amount: "$180.000", duration: "10 horas", savings: "Te ahorras $20.000" },
    },
    PE: {
      individual: { amount: "S/ 85",   duration: "sesión" },
      paquete:    { amount: "S/ 750",  duration: "10 horas" },
    },
  };

  function applyPricing(pricing: CountryPricing) {
    const plans = [pricing.individual, pricing.paquete];

    plans.forEach((plan, i) => {
      const amountEl = document.querySelector<HTMLElement>(`[data-plan-amount="${i}"]`);
      const durationEl = document.querySelector<HTMLElement>(`[data-plan-duration="${i}"]`);
      const savingsEl = document.querySelector<HTMLElement>(`[data-plan-savings="${i}"]`);

      if (amountEl) amountEl.textContent = plan.amount;
      if (durationEl) durationEl.textContent = `/${plan.duration}`;
      if (savingsEl) {
        savingsEl.textContent = plan.savings ?? "";
        savingsEl.classList.toggle("visible", !!plan.savings);
      }
    });
  }

  async function detectAndApply() {
    let countryCode = "DEFAULT";

    try {
      const res = await fetch("https://ipapi.co/json/");
      const data = await res.json();
      countryCode = data.country_code ?? "DEFAULT";
    } catch {
      countryCode = "DEFAULT";
    }

    let pricing: CountryPricing;
    if (PRICING[countryCode]) {
      pricing = PRICING[countryCode];
    } else if (EU.has(countryCode)) {
      pricing = PRICING.EU;
    } else {
      pricing = PRICING.DEFAULT;
    }

    applyPricing(pricing);
  }

  detectAndApply();
</script>

<style>
  .marquee {
    padding: 2rem 0;
    z-index: 9;
  }

  .photo-inner {
    margin: auto;
    position: relative;
    z-index: 9;
    width: 22rem;
    height: 26rem;
    border-radius: 2rem;
    overflow: hidden;
    border: 1.5px solid rgba(235, 14, 56, 0.4);
    box-shadow:
      0 0 60px rgba(235, 14, 56, 0.2),
      0 0 120px rgba(50, 170, 255, 0.1),
      inset 0 0 30px rgba(0, 0, 0, 0.5);

    @media (--mq-tablet) {
      width: 18rem;
      height: 22rem;
    }

    @media (--mq-phone) {
      width: 14rem;
      height: 17rem;
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center top;
    }
  }
</style>
