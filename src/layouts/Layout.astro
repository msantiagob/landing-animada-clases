---
import { Font } from "astro:assets";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import SmoothScroll from "../components/SmoothScroll.astro";
import { useTranslations } from "../i18n/utils";
import "../styles/global.css";
import logoImg from "../assets/img/logo.webp";

const { title } = Astro.props;
const t = useTranslations();

const links = [
  { title: "Inicio", url: "#inicio" },
  { title: "Clases", url: "#clases" },
  { title: "Metodología", url: "#metodologia" },
  { title: "Precios", url: "#precios" },
];

const canonicalURL = new URL(Astro.url.pathname, Astro.site ?? "https://sonmyd.co").href;
const siteUrl = Astro.site?.href ?? "https://sonmyd.co/";

// ── JSON-LD Schemas ──────────────────────────────────────────────────────────

const schemaWebSite = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": `${siteUrl}#website`,
  "name": "sonmyd",
  "url": siteUrl,
  "description": "Clases 1 a 1 de Inteligencia Artificial con Miguel Zuluaga. Desde fundamentos hasta nivel avanzado.",
  "inLanguage": "es",
  "author": { "@id": `${siteUrl}#person` },
};

const schemaPerson = {
  "@context": "https://schema.org",
  "@type": "Person",
  "@id": `${siteUrl}#person`,
  "name": "Miguel Zuluaga",
  "alternateName": "sonmyd",
  "url": siteUrl,
  "image": `${siteUrl}foto_miguel.png`,
  "jobTitle": "Experto en Inteligencia Artificial",
  "description": "Especialista en IA aplicada: modelos de lenguaje, visión computacional, automatización y aprendizaje automático.",
  "sameAs": [
    "https://twitter.com/sonmyd",
  ],
  "knowsAbout": [
    "Inteligencia Artificial",
    "Machine Learning",
    "Deep Learning",
    "Modelos de Lenguaje (LLMs)",
    "IA Generativa",
    "Prompt Engineering",
    "Python para IA",
    "Computer Vision",
    "RAG y Embeddings",
    "Automatización con IA",
  ],
};

const schemaService = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Clases personalizadas de Inteligencia Artificial",
  "url": siteUrl,
  "description": "Mentoría 1 a 1 en IA: Machine Learning, LLMs, Python, Prompt Engineering y más. Desde principiantes hasta nivel avanzado.",
  "serviceType": "Educación en Inteligencia Artificial",
  "provider": { "@id": `${siteUrl}#person` },
  "areaServed": {
    "@type": "Place",
    "name": "Online — América Latina y España",
  },
  "availableChannel": {
    "@type": "ServiceChannel",
    "serviceType": "Online",
    "availableLanguage": { "@type": "Language", "name": "Spanish" },
  },
  "offers": [
    {
      "@type": "Offer",
      "name": "Clase Individual",
      "price": "25",
      "priceCurrency": "USD",
      "description": "Sesión de 60 minutos con material de apoyo y grabación incluida.",
    },
    {
      "@type": "Offer",
      "name": "Paquete Intensivo",
      "price": "220",
      "priceCurrency": "USD",
      "description": "10 horas de clase con seguimiento continuo y proyecto real de portafolio.",
    },
  ],
};
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Primary meta -->
    <title>{title}</title>
    <meta name="description" content="Aprende IA con mentoría 1 a 1: Machine Learning, LLMs, Python para IA, Prompt Engineering y más. Clases con Miguel Zuluaga desde fundamentos hasta nivel experto." />
    <meta name="author" content="Miguel Zuluaga" />
    <meta name="keywords" content="clases inteligencia artificial, mentoría IA, aprender IA, machine learning, Python IA, LLMs, prompt engineering, IA generativa, clases online IA, sonmyd, Miguel Zuluaga" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#07070f" />

    <!-- Canonical -->
    <link rel="canonical" href={canonicalURL} />

    <!-- Favicon -->
    <link rel="icon" type="image/webp" href={logoImg.src} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="sonmyd" />
    <meta property="og:title" content="Clases de IA Personalizadas | Miguel Zuluaga — sonmyd" />
    <meta property="og:description" content="Aprende IA con mentoría 1 a 1: Machine Learning, LLMs, Python, Prompt Engineering y más. Desde cero hasta nivel experto." />
    <meta property="og:locale" content="es_CO" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:image" content={new URL("/og-image.png", siteUrl).href} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="sonmyd — Clases de IA Personalizadas con Miguel Zuluaga" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@sonmyd" />
    <meta name="twitter:site" content="@sonmyd" />
    <meta name="twitter:title" content="Clases de IA Personalizadas | Miguel Zuluaga — sonmyd" />
    <meta name="twitter:description" content="Aprende IA con mentoría 1 a 1: Machine Learning, LLMs, Python, Prompt Engineering y más." />
    <meta name="twitter:image" content={new URL("/og-image.png", siteUrl).href} />

    <!-- JSON-LD: WebSite -->
    <Fragment set:html={`<script type="application/ld+json">${JSON.stringify(schemaWebSite)}</script>`} />
    <!-- JSON-LD: Person -->
    <Fragment set:html={`<script type="application/ld+json">${JSON.stringify(schemaPerson)}</script>`} />
    <!-- JSON-LD: Service -->
    <Fragment set:html={`<script type="application/ld+json">${JSON.stringify(schemaService)}</script>`} />

    <!-- Head slot para schemas adicionales por página -->
    <slot name="head" />

    <Font cssVariable="--font-roboto-slab" preload />
    <Font cssVariable="--font-inter" preload />
  </head>
  <body>
    <a href="#main" class="skip-link">{t("accessibility.skip-to-content")}</a>
    <Header
      logoUrl="/"
      logoAlt="sonmyd"
      links={links}
      link2={{ title: "Hablemos", url: "#precios" }}
      link2ModalPlan="Sesión Gratuita"
    />
    <main id="main">
      <slot />
    </main>
    <Footer logoUrl="/" logoAlt="sonmyd" links={links} />
    <SmoothScroll />
  </body>
</html>

<style>
  .skip-link {
    background: var(--color-brand-1);
    left: 0;
    right: 0;
    margin: auto;
    width: min-content;
    white-space: nowrap;
    padding: 0.5rem;
    position: absolute;
    transform: translateY(-100%);
    transition: transform 0.3s ease;
    z-index: 100;
  }

  .skip-link:focus {
    transform: translateY(0%);
  }
</style>

<script>
  import "../utils/reveals";
</script>
